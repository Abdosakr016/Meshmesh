<!-- Form Component -->
<section class="cont">
  <div class="container pt-5">
    <form
      [formGroup]="vetCenterForm"
      (ngSubmit)="onUpdateVet()"
      class="professional-form"
      method="post"
    >
      <h2 class="text-center mb-4 rVetData">Veterinary Center Information</h2>
      <!-- Veterinary Center Name -->
      <div class="form-group">
        <label for="name">Veterinary Center Name</label>
        <input
          name="name"
          type="text"
          class="form-control"
          id="name"
          formControlName="name"
        />
        <div
          *ngIf="
            vetCenterForm.controls['name'].touched &&
            vetCenterForm.controls['name'].invalid
          "
          id="name_help"
          class="text-danger form-text"
        >
          <small *ngIf="vetCenterForm.controls['name'].errors?.['required']">
            this field is required
          </small>
          <small *ngIf="vetCenterForm.controls['name'].errors?.['minlength']">
            Min. length is 2
          </small>
        </div>
      </div>

      <!-- Location Information -->
      <div class="form-group">
        <div class="form-group col-md-6">
          <label for="street_address">Street Address</label>
          <input
            name="street_address"
            type="text"
            class="form-control"
            id="street_address"
            formControlName="street_address"
          />
        </div>

        <div
          *ngIf="
            vetCenterForm.controls['street_address'].touched &&
            vetCenterForm.controls['street_address'].invalid
          "
          id="name_help"
          class="text-danger form-text"
        >
          <small
            *ngIf="vetCenterForm.controls['street_address'].errors?.['required']"
          >
            this field is required
          </small>
        </div>
      </div>
      <!-- governorate -->
      <div class="mb-3">
        <label for="governorate" class="form-label governorate"
          >governorate</label
        >
        <select
          name="governorate"
          class="form-select"
          id="location"
          formControlName="governorate"
        >
          <option value="" disabled selected>Select a governorate</option>
          <option *ngFor="let governorate of cities" [value]="governorate">
            {{ governorate }}
          </option>
        </select>
      </div>
      <!-- ... Logo ... -->
      <div class="form-row">
        <label for="license">Logo</label>
        <div class="input-group mb-3 px-2 py-2 rounded-pill bg-white shadow-sm">
          <input
            name="logo"
            id="upload"
            type="file"
            (change)="get_imag_logo($event)"
            class="form-control border-0"
            formControlName="logo"
          />
          <label
            id="upload-label"
            for="logo"
            class="font-weight-light text-muted"
            >Choose file</label
          >
          <div class="input-group-append">
            <label for="logo" class="btn btn-light m-0 rounded-pill px-4">
              <i class="fa fa-cloud-upload mr-2 text-muted"></i
              ><small class="text-uppercase font-weight-bold text-muted"
                >Choose file</small
              ></label
            >
          </div>
        </div>
        <div class="image-area mt-4">
          <img
            id="imageResult"
            src="{{ logoBase64 }}"
            alt=""
            class="img-fluid rounded shadow-sm mx-auto d-block"
          />
        </div>
        <div
          *ngIf="
            vetCenterForm.controls['logo'].touched &&
            vetCenterForm.controls['logo'].invalid
          "
          id="name_help"
          class="text-danger form-text"
        >
          <small *ngIf="vetCenterForm.controls['logo'].errors?.['required']">
            this field is required
          </small>
        </div>
      </div>
      <!-- About the Center -->
      <div class="form-group mt-3">
        <label for="about">About the Center</label>
        <textarea
          name="about"
          class="form-control"
          id="about"
          formControlName="about"
          rows="4"
        ></textarea>
        <div
          *ngIf="
            vetCenterForm.controls['about'].touched &&
            vetCenterForm.controls['about'].invalid
          "
          id="name_help"
          class="text-danger form-text"
        >
          <small *ngIf="vetCenterForm.controls['about'].errors?.['required']">
            this field is required
          </small>
        </div>
      </div>

      <!-- Add Doctors Button -->
      <!-- <button type="button" class="btn btn-primary" routerLink="/Add_Doctors">
        Add Doctors
      </button> -->

      <!-- License -->
      <div class="form-group">
        <label for="license">License</label>
        <div class="input-group mb-3 px-2 py-2 rounded-pill bg-white shadow-sm">
          <input
            name="license"
            id="upload"
            type="file"
            (change)="get_image_license($event)"
            class="form-control border-0"
            formControlName="license"
          />
          <label
            id="upload-label"
            for="license"
            class="font-weight-light text-muted"
            >Choose file</label
          >
          <div class="input-group-append">
            <label for="license" class="btn btn-light m-0 rounded-pill px-4">
              <i class="fa fa-cloud-upload mr-2 text-muted"></i
              ><small class="text-uppercase font-weight-bold text-muted"
                >Choose file</small
              ></label
            >
          </div>
        </div>
        <div class="image-area mt-4">
          <img
            name="license"
            id="imageResult"
            src="{{ licenseBase64 }}"
            alt=""
            class="img-fluid rounded shadow-sm mx-auto d-block"
          />
        </div>
        <div
          *ngIf="
            vetCenterForm.controls['license'].touched &&
            vetCenterForm.controls['license'].invalid
          "
          id="name_help"
          class="text-danger form-text"
        >
          <small *ngIf="vetCenterForm.controls['license'].errors?.['required']">
            this field is required
          </small>
        </div>
      </div>
      <!-- Operating open Hours -->
      <div class="form-group">
        <label for="open_at">Operating open Hours</label>
        <input
          name="open_at"
          type="number"
          class="form-control"
          id="open_at"
          formControlName="open_at"
        />
        <div
          *ngIf="
            vetCenterForm.controls['open_at'].touched &&
            vetCenterForm.controls['open_at'].invalid
          "
          id="name_help"
          class="text-danger form-text"
        >
          <small *ngIf="vetCenterForm.controls['open_at'].errors?.['required']">
            this field is required
          </small>
        </div>
      </div>

      <!-- Operating close Hours -->
      <div class="form-group">
        <label for="close_at">Operating close Hours</label>
        <input
          name="close_at"
          type="number"
          class="form-control"
          id="close_at"
          formControlName="close_at"
        />
        <div
          *ngIf="
            vetCenterForm.controls['close_at'].touched &&
            vetCenterForm.controls['close_at'].invalid
          "
          id="name_help"
          class="text-danger form-text"
        >
          <small
            *ngIf="vetCenterForm.controls['close_at'].errors?.['required']"
          >
            this field is required
          </small>
        </div>
      </div>
      <!-- Tax Record -->
      <div class="form-group">
        <label for="tax_record">Tax Record</label>
        <div class="input-group mb-3 px-2 py-2 rounded-pill bg-white shadow-sm">
          <input
            name="tax_record"
            id="upload"
            type="file"
            (change)="get_image_tax($event)"
            class="form-control border-0"
            formControlName="tax_record"
          />
          <label
            id="upload-label"
            for="tax_record"
            class="font-weight-light text-muted"
            >Choose file</label
          >
          <div class="input-group-append">
            <label for="tax_record" class="btn btn-light m-0 rounded-pill px-4">
              <i class="fa fa-cloud-upload mr-2 text-muted"></i
              ><small class="text-uppercase font-weight-bold text-muted"
                >Choose file</small
              ></label
            >
          </div>
        </div>
        <div class="image-area mt-4">
          <img
            name="tax_record"
            id="imageResult"
            src="{{ taxBase64 }}"
            alt=""
            class="img-fluid rounded shadow-sm mx-auto d-block"
          />
        </div>
        <div
          *ngIf="
            vetCenterForm.controls['tax_record'].touched &&
            vetCenterForm.controls['tax_record'].invalid
          "
          id="name_help"
          class="text-danger form-text"
        >
          <small
            *ngIf="vetCenterForm.controls['tax_record'].errors?.['required']"
          >
            this field is required
          </small>
        </div>
      </div>

      <!-- Commercial Record -->
      <div class="form-group">
        <label for="commercial_record">Commercial Record</label>
        <div class="input-group mb-3 px-2 py-2 rounded-pill bg-white shadow-sm">
          <input
            name="commercial_record"
            id="upload"
            type="file"
            (change)="get_image_commrec($event)"
            class="form-control border-0"
            formControlName="commercial_record"
          />
          <label
            id="upload-label"
            for="commercial_record"
            class="font-weight-light text-muted"
            >Choose file</label
          >
          <div class="input-group-append">
            <label
              for="commercial_record"
              class="btn btn-light m-0 rounded-pill px-4"
            >
              <i class="fa fa-cloud-upload mr-2 text-muted"></i
              ><small class="text-uppercase font-weight-bold text-muted"
                >Choose file</small
              ></label
            >
          </div>
        </div>
        <div class="image-area mt-4">
          <img
            name="commercial_record"
            id="imageResult"
            src="{{ commercialBasde64 }}"
            alt=""
            class="img-fluid rounded shadow-sm mx-auto d-block"
          />
        </div>
        <div
          *ngIf="
            vetCenterForm.controls['commercial_record'].touched &&
            vetCenterForm.controls['commercial_record'].invalid
          "
          id="name_help"
          class="text-danger form-text"
        >
          <small
            *ngIf="vetCenterForm.controls['commercial_record'].errors?.['required']"
          >
            this field is required
          </small>
        </div>
      </div>

      <!-- Submit Button -->
      <button type="submit" class="btn btn-success">Submit</button>
    </form>
  </div>
</section>

<script>
  function readURL(input) {
    if (input.files && input.files[0]) {
      var reader = new FileReader();

      reader.onload = function (e) {
        $("#imageResult").attr("src", e.target.result);
      };
      reader.readAsDataURL(input.files[0]);
    }
  }

  $(function () {
    $("#upload").on("change", function () {
      readURL(input);
    });
  });

  /*  ==========================================
    SHOW UPLOADED IMAGE NAME
* ========================================== */
  var input = document.getElementById("upload");
  var infoArea = document.getElementById("upload-label");

  input.addEventListener("change", showFileName);
  function showFileName(event) {
    var input = event.srcElement;
    var fileName = input.files[0].name;
    infoArea.textContent = "File name: " + fileName;
  }
</script>
